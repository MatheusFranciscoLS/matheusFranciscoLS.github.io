// --- DICION√ÅRIO DE TRADU√á√ÉO COMPLETO ---
const translations = {
  pt: {
    // Menu
    "nav.home": "In√≠cio",
    "nav.about": "Sobre",
    "nav.projects": "Projetos",
    "nav.contact": "Contato",

    // Hero
    "hero.badge": "Dispon√≠vel para projetos",
    "hero.role": "Desenvolvedor Full-Stack",
    "hero.subrole": "Java, Spring Boot & React",
    "hero.bio":
      "Crio aplica√ß√µes modernas, r√°pidas e escal√°veis unindo a robustez do <strong>Java + Spring Boot</strong> com a flexibilidade do <strong>React</strong>. Tenho vis√£o t√©cnica e pr√°tica ‚Äî construo solu√ß√µes completas do backend ao front, sempre priorizando qualidade, performance e experi√™ncia do usu√°rio.",
    "hero.ctaPrimary": "Ver Projetos",
    "hero.ctaSecondary": " Ver Reposit√≥rios",
    "hero.xpYears": "8+",
    "hero.xpText": "Anos de Exp. Profissional",

    // Stats Hero
    "hero.stat1Title": "Engenharia de Software",
    "hero.stat1Desc": "C√≥digo limpo e escal√°vel.",
    "hero.stat2Title": "Projetos Full-Stack",
    "hero.stat2Desc": "Aplica√ß√µes de ponta a ponta.",

    // IMPACTO / DIFERENCIAIS
    "value.title": "Meu Impacto no Time",
    "value.subtitle":
      "N√£o sou apenas um codificador. Trago vis√£o de neg√≥cio e maturidade profissional.",
    "value.card1.title": "Autonomia & Resolu√ß√£o",
    "value.card1.desc":
      "N√£o espero ordens, busco solu√ß√µes. Minha bagagem comercial me ensinou a resolver problemas de forma independente e proativa.",
    "value.card2.title": "C√≥digo com Prop√≥sito",
    "value.card2.desc":
      "Entendo que o software existe para resolver uma dor. Foco em entregar valor real, n√£o apenas em escrever linhas de c√≥digo.",
    "value.card3.title": "Comunica√ß√£o Assertiva",
    "value.card3.desc":
      "Traduzo requisitos t√©cnicos para linguagem de neg√≥cio e vice-versa, facilitando o alinhamento entre equipes e stakeholders.",

    // Sobre
    "about.badge": "Minha Jornada",
    "about.title":
      "Vis√£o estrat√©gica,<br> <span class='text-gradient'>execu√ß√£o t√©cnica.</span>",
    "about.desc1":
      "Com <strong>8 anos de experi√™ncia profissional</strong>, desenvolvi uma vis√£o estrat√©gica forte: entender pessoas, problemas e entregar solu√ß√µes reais.",
    "about.desc2":
      "Hoje aplico essa experi√™ncia no desenvolvimento de software, criando sistemas completos que combinam arquitetura s√≥lida, UX intuitiva e c√≥digo escal√°vel. Meu objetivo √© simples: transformar ideias em produtos funcionais e eficientes.",
    "about.cv": "Baixar Curr√≠culo PDF",
    "about.certs": "Forma√ß√£o & Certificados",

    // Skills
    "about.skill1": "üí° Resolu√ß√£o de Problemas",
    "about.skill2": "ü§ù Negocia√ß√£o",
    "about.skill3": "üó£Ô∏è Comunica√ß√£o Clara",
    "about.skill4": "‚ö° Autonomia",
    "about.skill5": "üîÑ Adaptabilidade",

    // Certificados
    "cert.cs": "Ci√™ncia da Computa√ß√£o",
    "cert.cs.desc": "Bacharelado ‚Äî Anhembi Morumbi (Em curso)",
    "cert.tec": "T√©cnico em Desenv. de Sistemas",
    "cert.tec.desc": "Forma√ß√£o Completa ‚Äî SENAI (2022 - 2024)",
    "cert.java": "Java & Banco de Dados",
    "cert.java.desc": "Forma√ß√£o Espec√≠fica (240h) ‚Äî SENAI",
    "cert.aws": "AWS Cloud Practitioner",
    "cert.aws.desc": "Infraestrutura e Nuvem",

    // Tech Stack
    "tech.title": "Tecnologias & Ferramentas",
    "tech.subtitle":
      "Meu arsenal t√©cnico para construir solu√ß√µes escal√°veis e de alta performance.",
    "tech.backend": "Back-end & Dados",
    "tech.frontend": "Front-end Moderno",
    "tech.devops": "DevOps & Ferramentas",

    // Projetos
    "projects.title": "Solu√ß√µes em Software",
    "projects.subtitle":
      "Aplica√ß√µes full-stack desenvolvidas com foco em performance, escalabilidade e experi√™ncia do usu√°rio.",
    "projects.viewAll": "Ver tudo no GitHub ‚Üí",

    // PROJETO 1
    "p1.title": "Economia Solid√°ria",
    "p1.desc":
      "Plataforma full-stack criada para conectar pequenos produtores e consumidores. Sistema completo com autentica√ß√£o, upload de imagens, cadastro de produtos e painel de gest√£o.",
    "p1.tag1": "Firebase Storage",
    "p1.tag2": "Arquitetura Modular",
    "p1.tag3": "Auth JWT",

    // PROJETO 2
    "p2.title": "Business Flow",
    "p2.desc":
      "Sistema completo de gest√£o empresarial, reunindo financeiro, CRM de clientes e relat√≥rios PDF. Inclui tabela din√¢mica, c√°lculos autom√°ticos e filtros avan√ßados.",
    "p2.tag1": "Prisma ORM",
    "p2.tag2": "Upload Multer",
    "p2.tag3": "Relat√≥rios PDF",

    // PROJETO 3
    "p3.title": "Chat <br> FURIA",
    "p3.desc":
      "Interface moderna para comunidade de f√£s. Vers√£o Front-End com foco em UX, gamifica√ß√£o visual, componentiza√ß√£o limpa e alta performance.",
    "p3.tag1": "CSS Puro",
    "p3.tag2": "Gamifica√ß√£o UI",
    "p3.tag3": "React Hooks",

    // Contato
    "contact.title": "Pronto para somar ao time.",
    "contact.subtitle": "Me chame e vamos conversar sobre oportunidades.",
    "contact.whats": " WhatsApp",
    "contact.copy": "üìß Copiar E-mail",
    "contact.send": "Enviar Agora",
    "contact.copied": "‚úÖ Copiado!",
    "contact.direct": "Ou envie uma mensagem direta:",

    // Form
    "form.name": "Seu Nome",
    "form.email": "Seu Email",
    "form.message": "Como posso ajudar?",
  },
  en: {
    // Menu
    "nav.home": "Home",
    "nav.about": "About",
    "nav.projects": "Projects",
    "nav.contact": "Contact",

    // Hero
    "hero.badge": "Available for hire",
    "hero.role": "Full-Stack Developer",
    "hero.subrole": "Java, Spring Boot & React",
    "hero.bio":
      "I build modern, fast, and scalable applications combining the robustness of <strong>Java + Spring Boot</strong> with the flexibility of <strong>React</strong>. I have technical and practical vision ‚Äî building complete solutions from backend to front, always prioritizing quality, performance, and user experience.",
    "hero.ctaPrimary": "View Projects",
    "hero.ctaSecondary": " View Repositories",
    "hero.xpYears": "8+",
    "hero.xpText": "Years Pro Experience",

    // Stats Hero
    "hero.stat1Title": "Software Engineering",
    "hero.stat1Desc": "Clean and scalable code.",
    "hero.stat2Title": "Full-Stack Projects",
    "hero.stat2Desc": "End-to-end applications.",

    // IMPACT / VALUE SECTION
    "value.title": "My Impact on the Team",
    "value.subtitle":
      "I'm not just a coder. I bring business vision and professional maturity.",
    "value.card1.title": "Autonomy & Resolution",
    "value.card1.desc":
      "I don't wait for orders, I seek solutions. My sales background taught me to solve problems independently.",
    "value.card2.title": "Purposeful Code",
    "value.card2.desc":
      "I understand software exists to solve pain points. I focus on delivering real value, not just writing lines of code.",
    "value.card3.title": "Clear Communication",
    "value.card3.desc":
      "I bridge the gap between technical requirements and business language, facilitating alignment across teams.",

    // About
    "about.badge": "My Journey",
    "about.title":
      "Strategic vision,<br> <span class='text-gradient'>technical execution.</span>",
    "about.desc1":
      "With <strong>8 years of professional experience</strong>, I developed a strong strategic vision: understanding people, problems, and delivering real solutions.",
    "about.desc2":
      "Today I apply this experience in software development, creating complete systems that combine solid architecture, intuitive UX, and scalable code. My goal is simple: transform ideas into functional and efficient products.",
    "about.cv": "Download Resume (PDF)",
    "about.certs": "Education & Certs",

    // Skills
    "about.skill1": "üí° Problem Solving",
    "about.skill2": "ü§ù Negotiation",
    "about.skill3": "üó£Ô∏è Clear Communication",
    "about.skill4": "‚ö° Autonomy",
    "about.skill5": "üîÑ Adaptability",

    // Certs
    "cert.cs": "Computer Science",
    "cert.cs.desc": "Bachelor's Degree ‚Äî Anhembi Morumbi (Ongoing)",
    "cert.tec": "Systems Development Tech",
    "cert.tec.desc": "Full Technical Course ‚Äî SENAI (2022 - 2024)",
    "cert.java": "Java & Database",
    "cert.java.desc": "Specific Training (240h) ‚Äî SENAI",
    "cert.aws": "AWS Cloud Practitioner",
    "cert.aws.desc": "Infrastructure & Cloud",

    // Tech
    "tech.title": "Tech Stack & Tools",
    "tech.subtitle":
      "My technical arsenal for building scalable and high-performance solutions.",
    "tech.backend": "Back-end & Data",
    "tech.frontend": "Modern Front-end",
    "tech.devops": "DevOps & Tools",

    // Projects Intro
    "projects.title": "Software Solutions",
    "projects.subtitle":
      "Full-stack applications developed with a focus on performance, scalability, and user experience.",
    "projects.viewAll": "View all on GitHub ‚Üí",

    // Projects
    "p1.title": "Solidarity Economy",
    "p1.desc":
      "Full-stack platform created to connect small local producers and consumers. Complete system with authentication, image upload, product registration, and management panel.",
    "p1.tag1": "Firebase Storage",
    "p1.tag2": "Modular Arch",
    "p1.tag3": "Auth JWT",

    "p2.title": "Business Flow",
    "p2.desc":
      "Complete business management system, gathering finance, CRM, and PDF reports. Includes dynamic tables, automatic calculations, and advanced filters.",
    "p2.tag1": "Prisma ORM",
    "p2.tag2": "Upload Multer",
    "p2.tag3": "PDF Reports",

    "p3.title": " Chat <br> FURIA",
    "p3.desc":
      "Modern interface for a fan community. Front-End version focused on UX, visual gamification, clean componentization, and high performance.",
    "p3.tag1": "Pure CSS",
    "p3.tag2": "Gamification UI",
    "p3.tag3": "React Hooks",

    // Contact
    "contact.title": "Ready to join your team.",
    "contact.subtitle": "Reach out and let's discuss opportunities.",
    "contact.whats": " WhatsApp",
    "contact.copy": "üìß Copy E-mail",
    "contact.send": "Send Now",
    "contact.copied": "‚úÖ Copied!",
    "contact.direct": "Or send a direct message:",

    // Form
    "form.name": "Your Name",
    "form.email": "Your Email",
    "form.message": "How can I help you?",
  },
};

// --- FUN√á√ÉO DE TRADU√á√ÉO ROBUSTA ---
// --- FUN√á√ÉO DE TRADU√á√ÉO (COM TROCA DE PDF) ---
window.changeLanguage = function (lang) {
  // 1. Atualiza Textos
  document.querySelectorAll("[data-i18n]").forEach((element) => {
    const key = element.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      if (element.tagName === "INPUT" || element.tagName === "TEXTAREA") {
        element.placeholder = translations[lang][key];
      } else {
        element.innerHTML = translations[lang][key];
      }
    }
  });

  // 2. Atualiza Bot√µes Ativos
  document
    .querySelectorAll(".lang-btn")
    .forEach((btn) => btn.classList.remove("active"));
  const activeBtn = document.querySelector(
    `.lang-btn[onclick="changeLanguage('${lang}')"]`
  );
  if (activeBtn) activeBtn.classList.add("active");

  // 3. TROCA O ARQUIVO DO CURR√çCULO (A M√°gica acontece aqui)
  const cvLink = document.getElementById("cv-link");
  if (cvLink) {
    if (lang === "en") {
      cvLink.href = "assets/curriculo-en.pdf"; // Link do PDF em Ingl√™s
    } else {
      cvLink.href = "assets/curriculo-pt.pdf"; // Link do PDF em Portugu√™s
    }
  }

  // 4. Salva prefer√™ncia
  localStorage.setItem("preferredLang", lang);
};

// --- INICIALIZA√á√ÉO ---
document.addEventListener("DOMContentLoaded", () => {
  // A. For√ßa o idioma inicial para Portugu√™s (ou o √∫ltimo salvo)
  const savedLang = localStorage.getItem("preferredLang") || "pt";
  changeLanguage(savedLang);
  initContactForm();

  // B. Menu Mobile
  const menuIcon = document.querySelector(".mobile-menu-icon");
  const navLinks = document.querySelector(".nav-links");

  if (menuIcon) {
    menuIcon.addEventListener("click", () => {
      navLinks.classList.toggle("active");
      menuIcon.textContent = navLinks.classList.contains("active") ? "‚úï" : "‚ò∞";
    });
  }

  // C. Anima√ß√£o de Scroll
  const observerOptions = { threshold: 0.1 };
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) entry.target.classList.add("scroll-visible");
    });
  }, observerOptions);

  document.querySelectorAll(".section").forEach((el) => observer.observe(el));

  // D. Bot√£o Voltar ao Topo
  const backToTopBtn = document.getElementById("backToTop");
  if (backToTopBtn) {
    window.addEventListener("scroll", () => {
      if (window.scrollY > 300) backToTopBtn.classList.add("show-btn");
      else backToTopBtn.classList.remove("show-btn");
    });
  }

  // E. Ano Autom√°tico
  const yearSpan = document.getElementById("current-year");
  if (yearSpan) yearSpan.textContent = new Date().getFullYear();
});

// --- FUN√á√ÉO DE COPIAR EMAIL ---
window.copyEmail = function () {
  const email = "matheusf.ls@hotmail.com";
  const btnText = document.getElementById("copyText");

  // Pega o idioma ativo para mostrar a mensagem certa
  const currentLang = document
    .querySelector(".lang-btn.active")
    ?.getAttribute("onclick")
    .includes("'en'")
    ? "en"
    : "pt";

  navigator.clipboard.writeText(email).then(() => {
    const originalText = translations[currentLang]["contact.copy"];
    btnText.innerText = translations[currentLang]["contact.copied"];
    setTimeout(() => (btnText.innerText = originalText), 2000);
  });
};


function initContactForm() {
  const form = document.getElementById("contact-form");
  if (!form) return;

  form.addEventListener("submit", async (e) => {
    e.preventDefault(); // impede a tela branca do Formspree

    const formData = new FormData(form);
    const submitBtn = form.querySelector("button[type=submit]");
    const existingMessage = form.querySelector(".success-message");

    // Remove mensagem antiga caso exista
    if (existingMessage) existingMessage.remove();

    submitBtn.textContent = "Enviando...";
    submitBtn.disabled = true;

    try {
      const response = await fetch(form.action, {
        method: "POST",
        body: formData,
        headers: { Accept: "application/json" },
      });

      if (response.ok) {
        form.reset();

        // mensagem de sucesso dentro da pr√≥pria p√°gina
        form.insertAdjacentHTML(
          "beforeend",
          `
          <p class="success-message" style="
            margin-top: 15px;
            color: #4ade80;
            font-size: 1rem;
            text-align: center;
          ">
            ‚úîÔ∏è Mensagem enviada com sucesso!
          </p>
        `
        );
      } else {
        alert("Erro ao enviar. Tente novamente.");
      }
    } catch (error) {
      alert("Ocorreu um erro inesperado. Tente novamente.");
    }

    submitBtn.textContent = "Enviar Agora";
    submitBtn.disabled = false;
  });
}
